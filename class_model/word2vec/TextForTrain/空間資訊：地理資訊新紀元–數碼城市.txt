 何謂數碼城市

你使用過汽車導航嗎？它透過全球定位系統（GPS）把汽車所在位置顯示在地圖上，引導駕駛到預定目的地。但你是否曾發生過到達目的地之後，卻找不到某個地址的窘境？這是因為汽車導航上的二維電子地圖與三度空間的真實世界間，在視覺上有著太大的差異，使得我們雖已被導引到正確位置，仍無法與真實世界相對應。這時如果能用三度空間虛擬實境的方式，模擬汽車前方所看到的景象，包括房屋、橋梁、樹木、河川、高山等，並呈現在導航系統螢幕上，便可避免這種窘境了。

為了達到這個目的，首先必須具備真實世界中每一地表物的「三維幾何模型」，與這些物體表面的「紋理貼圖影像」，然後以電腦繪圖技術來模擬所看到的景象。本文所討論的數碼城市，就是利用電腦複製出一個虛擬的城市，它擁有與真實環境大致相似的機能。這種景象與電腦遊戲所呈現的效果，最大的差異在於它複製真實的世界，因此它與民眾的關係更為密切、真實而有情感。

數碼城市的應用可以突破二維電子地圖視覺表現的障礙，支援政府部門進行相關的決策時，會更直覺有效，因此預期數碼城市將成為地理資訊新紀元最重要的一部分。

數碼城市的演化

地圖的用途在於提供地形、地貌、方向、位置、距離、面積等多項資訊，在還沒有發明電腦之前，人們只能使用圖紙式地圖。這種地圖在製作上不僅耗時費工，內容有限，也不易更新，使得應用上受到相當多的限制。自從有了電腦後，電子地圖的製作變得容易許多，也因而拓展了地圖的使用面，由地理資訊系統（geographic GIS）的蓬勃發展可見一斑。

現今存在於各地方政府的數值地形圖，是把所有點、線、面形式的地理資訊以二維座標來記錄其位置，並配合地形等高線與房屋樓層數來描述三度空間的世界。但在二維地圖上表現三度空間地理資訊的方式，已漸漸無法滿足民眾的需求。因為使用者不僅希望具有三維空間的資訊，也希望能在視覺上有親臨現場的感受，這使得數碼城市的相關研究逐漸受到重視。

數碼城市的內涵

前述的數碼城市僅討論到外表的呈現，但以文化層面而言，最重要的是它所擁有的內涵。也就是說，數碼城市除了可提供三度空間方向、位置、距離、面積、體積等基本量測功能，以及地形地貌特徵外，它還須具備人文、歷史等多方面的內涵。由於數碼城市具有豐富的都市紋理特徵與細緻的建築外觀，因此它可以呈現出一個都市演變與開發的歷史痕跡，甚至隱含的文化、經濟與政治背景。它不僅可以提供三維空間資訊，也可讓民眾更加了解所生活的環境，並深思個人與環境的關係和對環境的責任。

數碼城市的製作過程

數碼城市所涵蓋的內容包羅萬象，包括一般的點、線、面地理資訊圖層，例如觀光景點位置、房屋門牌地址、各式道路、行政邊界、河川、湖泊等。其中與人類生活環境最息息相關的就是房屋，因此以下將以三維房屋幾何模型重建，以及牆面紋理貼圖的製作為例，說明一個三維仿真數碼城市（3D model）的製作過程。

我們須先了解一個觀念，在數碼城市的製作過程中，事實上是把生活環境裡的各種物體予以「數位化」及「簡化」。例如可以用六面體來描述一棟平頂的四面牆房屋。但這樣數位化後只有建築物外框，是否要繼續把門、窗、陽臺、梁柱、女兒牆等逐一數位化，以製作這些細部結構的幾何模型呢？它們表面的顏色、紋理與材質又該如何描述？這些問題都必須考量到應用面的需求，以及製作的成本效益。

雖然坊間有許多軟體套件可進行三維建物的模塑，例如3D Max、Maya、AutoCAD等，但是其處理對象只是少數幾棟設計新穎或別出心裁的特殊建築，同時製作過程所需的時間與人工成本相當高，並不適合針對城鎮中密密麻麻的房屋建築來進行幾何模塑與紋理貼圖。

由於處理的對象是城鎮中的大量建築物，在製作時所採用的技術屬於非接觸式的航空攝影測量。「數位化」的目標僅限於屋頂面的幾何結構，必須再配合數值地形模型（digital DTM）來求得屋腳高度，進而產生垂直牆面。至於牆面上的細部幾何構造，則是透過現場拍攝的實景影像來產生「牆面紋理貼圖」。

這種利用實景影像彌補細部幾何結構的優點，除了可以減少資料量之外，更可以提供建物外牆的顏色、紋理（例如具重複性的四方形圖案）、材質（例如磚塊、水泥、木頭或玻璃）等資訊。就應用面而言，這種描述方式已經可以達到城市導覽、飛行演練、都市規畫、防救災演練、災害模擬、不動產買賣，甚至網路遊戲等的需求。

為了考量製作的成本效益與應用的需求，以下進一步說明如何透過航遙測（photogrammetry sensing）技術進行三維房屋模型的重建，以及牆面紋理貼圖的製作，來建構三維仿真式城市模型。

重建三維房屋模型

所謂航遙測技術是利用載具，例如衛星、飛機、直升機等，攜帶特殊設計的感測器如照相機、雷射掃描儀等，透過適當的距離來探測地表物，以獲取地表面影像資料或離散式三維座標點雲（point cloud）資料。進而利用資料分析、特徵偵測、特徵萃取等方式來了解地表物的特性，譬如道路的位置、寬度，湖泊的範圍與面積，房屋的邊界、大小、高度等。

就三維房屋模型幾何模塑而言，常用的資料包括航空照片、高解析衛星影像、空載雷射掃描點雲等。隨著使用資料的不同，採取的房屋模型重建策略也會有所不同，例如完全人工、半自動化或全自動，使用單純一種資料或使用多種資料進行資料融合以截長補短，提升成果的精確度、可靠度或製作過程的自動化程度等。

如何利用航空照片重建三維房屋模型呢？用飛機進行航空攝影，可以得到空間解析度約10～20公分的航空立體影像，它的準確度可以達到1：1,000大比例尺數值地形圖製作的需求。假設已經利用空中三角測量技術求得每一幅影像在照相瞬間的方位參數，就可利用連續兩張影像，針對重疊區內的建築物，以人工方式進行立體量測，來得到房屋邊界及屋頂的三維結構線。

例如連續兩個屋頂角落的三度空間座標，其連線就稱為三維結構線。由於這些結構線彼此間可能不相連接，無法構成封閉的多邊形，不具位相關係（topology），也就無法描述房屋的外形。因此在自動化三維房屋幾何模塑的過程中，把所有三維結構線投影到平面上當成二維線段，並移除各個線段間不連接的現象，同時設定線段間的連續關係來形成封閉多邊形。

接著利用各個線段原先的高度，推斷各個封閉多邊形的高度與外形，包括水平屋頂或傾斜屋頂等。經過這些步驟就可完成屋頂面幾何結構的模塑。由於透過航空攝影測量的方式，並不容易觀測到牆面的細部幾何結構，因此先假設所有牆面都是垂直面，接著利用屋腳地形面的高度資料計算屋腳的高度，進而產生牆面的幾何結構，完成三維房屋幾何模塑的工作。

製作牆面紋理貼圖

紋理貼圖是一種補償幾何結構的不足，增加物體表面細節、材質與色彩的方式。就數碼城市的應用而言，通常採用兩種方法來製作紋理貼圖。第1種是以電腦繪製虛擬的牆面圖案來呈現門窗梁柱等，其製作過程容易，但效果不夠逼真。第2種方法是到現場拍攝實景影像，經過幾何改正後產生牆面紋理影像。這種做法的缺點是拍攝照片時經常會被建物前的汽車、樹木或其他物體所遮蔽，使得製作過程較為耗時費工，但效果最真實，被接受度較高。因此相關研究多在探討如何提升其製作效率，以及克服遮蔽問題。

先前曾提及所處理的對象是城鎮中的大量建築物，因此可以想見所拍攝的建築物相片數量會有成千上萬張。對於如何搜尋所需要的建築物相片，也成為操作者相當頭疼的問題。

究竟該如何利用近景攝影測量技術，配合GPS及GIS來提升紋理貼圖製作的效率呢？我們利用GPS數位相機，把拍攝地點的經緯度座標記錄在影像檔頭中，就可把大量的建築物相片透過GIS的環境，與航空正射影像或各式地理資訊圖資整合在一起，以地圖的方式來管理相片。當製作某一建築物外牆的紋理貼圖時，便可透過這種地圖式相片管理系統，選擇該建物附近的現場照片，大幅降低人工搜尋相片的時間，增加處理效率。

一般的相機都是以中心透視投影的方式來產生影像，因此無法避免各種幾何變形，例如鏡頭畸變效應會使得直線變成弧線，傾斜攝影效應會讓正方形變成平行四邊形等。為了減少人工處理的程序，可利用攝影測量技術，先對鏡頭進行率定（calibration）得到鏡頭畸變參數，再針對一幅建築物相片進行相機方位求解。接著在產生牆面紋理貼圖的過程中，同時解決幾何變形、鏡頭畸變等效應，進而得到高品質的紋理貼圖影像。

在求解相機方位參數時，利用建築物幾何模型中的牆面角落當作「地面控制點」，並在建築物相片上找尋對應的「影像控制點」。當操作者在移動與設定「影像控制點」時，便可算出相機方位參數，並利用該參數把建築物三維幾何模型投射到建築物相片上。若模型外框與相片的建築物邊界吻合，就表示求解正確，可進一步製作每一面牆的紋理貼圖影像。這種視覺化的檢核過程，方便操作者「檢視」方位求解是否正確，不需專業知識就可完成建築物牆面的紋理貼圖工作。

數碼城市的應用

數碼城市的應用相當廣泛，由於它是真實世界的複製品，許多不適合在真實世界進行的實驗，都可以在數碼城市中進行模擬，例如空氣或噪音模擬、化學工廠毒氣外洩污染模擬、各種災害模擬等。在電影〈明天過後〉（The Tomorrow）中，美國紐約市遭受海嘯吞噬及冰封，洛杉磯市遭受龍捲風的摧殘等場景，除了高超的電腦特效處理外，若沒有數碼城市的幫忙，恐怕也無法達成如此逼真的效果。

在災害模擬應用以外，數碼城市也可以應用在城市導覽、飛行演練、都市規劃、防救災演練、不動產買賣、電子商務、網路遊戲等方面。

2005年6月網路搜尋引擎巨擘Google，開啟了Google Map網際網路地圖與衛星影像的瀏覽與查詢服務。其中Google Earth甚至以三維動態瀏覽的方式，向世人公開全球各大城市的高解析衛星影像，以及美國主要城市的三維房屋模型。

這項服務在國際航遙測與地理資訊領域造成了極大的震撼，同時也帶給民眾從另一種角度來認識自身所生活的環境。它不僅讓任何人可以透過網際網路，以三維動態瀏覽方式觀賞地球上任何角落的地形與地貌，更可以透過社群的觀點，向全世界介紹自己周遭的人文、歷史、地理等特色。

雖然Google Earth所公布的三維房屋模型，是以水平屋頂面來描述所有建物的屋頂，並未提供斜頂屋、圓頂屋、弧頂屋等特殊造型的建築，也沒有牆面紋理貼圖等資訊。為了彌補這項缺憾，Google透過Sketch Up，提供使用者自行製作仿真式三維房屋模型，並公布在社群3D倉儲中供大眾下載觀賞。Google Earth所提供的服務，造成了網際網路地理資訊服務產業的重大變革。

電腦巨擘微軟也同時在2005年推出了網際網路三維地圖服務，稱為Virtual Earth相似，但所提供的高解析影像及三維房屋模型較少。然而Virtual Earth更勝一籌的是，它提供了仿真式三維房屋模型，使得瀏覽效果更接近真實景象。

觀察Google與微軟兩大公司相繼推出網際網路數碼城市相關服務，可以想見數碼城市的應用具有相當大的潛在市場。2006年美國《時代》雜誌選出「你」為年度風雲人物，事實上指的就是使用網路的「你」。由此可知這個市場不能沒有「你」，因為「你」可能就是數碼城市的使用者，未來的「你」將可以藉由網路與數碼城市進行互動，譬如藉由社群討論提供都市規劃的方針。因此「你」會決定數碼城市的興衰起落，也就是說「你」與數碼城市的關係會越來越密切。

