 翻開電影史，〈阿凡達〉（Avatar）就像是潘朵拉星球蘊藏的寶石般，吸引了舉世的目光。長期以超級電腦進行研發與應用的科學家，很開心地看到詹姆斯‧卡麥隆（James Cameron）導演發揮了精湛的電影特效技術，成就了票房神話以及高速算圖（supercomputer rendering）的信仰。

影片中透過3D影像的手法，納美人乘著飛龍遨翔於險峻的峽谷裡，以及潘朵拉的晨曦穿梭草木林蔭間的細緻光影等，挑逗著觀賞者的視覺味蕾。那種深度沉浸於虛擬世界的興奮，彷彿脫離了現實生活的灰姑娘，在宴會上與王子共舞時的心神。能夠達到如此的境界，不外乎是源自於卡麥隆在〈鐵達尼號〉的世紀愛戀後，寄寓於擴張主義與生物多樣性的衝突及慘烈對搏，再次擄獲了人心。

然而〈阿凡達〉橫掃全球票房達八百三十多億新臺幣的紀錄，還有一個重量級的關鍵，就是紐西蘭籍導演彼得‧傑克森（Peter Jackson）的加入。他以視覺詩人般的情懷，精緻地融合電影特效與超級電腦，創造出全新的預行運算引擎PantaRay，神乎其技地算出了萬物並育、川流不息的意象。

金剛的500萬根毛髮

電影中凡是運用不同於實拍方法所製作出的影像，通稱為電影特效（visual effects）。過去，在極度危險的劇情或預算有限時，才會使用這一手法。惟近年受惠於電腦與軟體科技的發展，大量依靠電腦算圖（computer-generated CGI，或稱電腦繪圖）的特效技術來創造扣人心弦的各式場面，已成為世界電影的主流。

1993年，一顆電影特效界的新星在紐西蘭冉冉升起，自小就有「電影天才」封號的傑克森，創立了電影特效技術公司Weta Digital。短短十年光景，他所執導與製作的〈魔戒三部曲：王者再臨〉，奇蹟般地橫掃了2003年奧斯卡最佳影片、最佳導演、最佳視覺效果等11項獎座的提名，締造了全球立體電影的風潮，也振興了紐西蘭的電影工業。

在名利雙收下，傑克森與他的團隊又於2005年推出了〈金剛〉。這部影片在特效技術上與〈魔戒〉迥然不同，運用了超越〈怪獸電力公司〉的毛髮特效，讓金剛的500萬根毛髮與碰觸它們的泥沙、葉子、水、光線等，都能傳神地動了起來。當金剛在樹叢間奔跑時，身上的海量毛髮在風吹雨打下的動態影像真假難分，令觀眾咋舌不已，同時讓從事力學研究的科學家們嘆為觀止，因為這可是流固交互作用的力學行為，涉及了複雜且高難度的學理與計算工作！

這些經驗促使了傑克森與卡麥隆的合作，這兩位名導聯手打造的〈阿凡達〉果然不同凡響。由傑克森領導的Weta Digital，是〈阿凡達〉最大的視覺特效技術團隊，他們的任務就是完成耗費達PetaBytes的電腦儲存空間，以營建出八百多個電腦生成角色在場景中的連續鏡頭。

傑克森了解這回所面對的電腦算圖量，不再是以百萬計的虛擬多邊形（virtual polygon），而是必須以10億為單位的新挑戰。他更明白這也不是他的團隊過往涉獵的特效與光影計算可比，Weta Digital需要與更強大的超級電腦合體，以開發最先進的高速算圖技術。

彩影暢流的視覺盛宴

因為〈阿凡達〉，NVIDIA的Jacopo Pantaleoni飛往紐西蘭威靈頓，駐留了幾個月，與Weta Digital的特效部門共同尋找解決方案。數學背景的Pantaleoni鑽研即時光跡追蹤演算法與大量平行處理器領域多年，就在這個Weta Digital與NVIDIA的合作專案中，研發成員基於光跡追蹤原理，創造出PantaRay，在耗時的方向性遮蔽計算部分，使用了圖形處理器（graphic GPU）的高速計算技術，達成在嚴苛的光線漫射條件下，可提升好幾倍的算圖速度。

〈阿凡達〉有段經典畫面足以說明PantaRay平行處理海量場景的高速算圖力。群山漫舞、林濤浩蕩的潘朵拉上，數以百計的紫色飛龍穿越雲霧、飛過水面的鏡頭，若是採用傳統的方法，需要至少一個星期的時間來製作。但以PantaRay來算圖，就能夠縮短至一天半，且可完整實現導演對於每個鏡頭細節與色彩的要求。

PantaRay的命名是引用希臘格言panta rhei的「萬物流動」字義而來，果如其名，PantaRay讓色彩瑰麗的生物群體，在飛行過程中，與雲海、樹枝、葉子、交錯其間的光照等的交相作用，流暢地化為萬物川流、拂光掠影之美。

光影猶如料理中的香草植物，可為電影情節裡的情感與氣氛提味。早期倚重打光師在拍攝現場的打光功力，惟拜近代科技所賜，現在的影視工作者可以透過電腦，在動畫軟體裡直接設定光源參數，模擬影片中室內或戶外等場景的光線。

PantaRay所採用的光跡追蹤，是目前處理光影效果的主流方法之一。原理上，假設光線的傳播終止於觀察點，如攝影位置，則可以逆向推求光源位置，並考量所發射的光線經過障礙物後的反射、折射因素，來模擬真實光線的傳播路徑。越複雜的場景，光線行進中遇到的障礙物會越多，可想而知，反射、折射的計算次數及計算量也會益加龐大。

〈阿凡達〉所使用的算圖流程，是在每秒達205 TeraFlops計算量的超級電腦上，利用Pixar動畫公司開發的算圖引擎RenderMan（PRMan），依攝影點位把動畫軟體Maya產生的場景切割為子區塊後，再藉由PantaRay的GPU加速法，預先計算出光線因障礙物衍生的方向性遮蔽資料，並存於緩衝區供PRMan重複運用，來達到提升最終影像生成效率的目的。

整體而言，〈阿凡達〉的製作「高度」，在於不僅要無中生有地建造出潘朵拉世界裡分明的晝夜、茂密的森林、生物群體等，還要讓所有的環節鉅細靡遺地相扣合宜，包含陽光照耀下的水花、依地貌起伏蔓生的枝葉形態，以及夜間穿梭叢林、抵抗入侵者的納美人等。這些精工細作、沁入人心的畫面，顯露了光學與動力學完美交融的素養，還有算圖引擎與超級電腦合而為一的精湛。

電影世界中的超級電腦

CGI，顧名思義，是伴隨著電腦而生的。自從1950年代有了第一部商業電腦 UNIVAC後，電影特效的發展就如向日葵般地，朝著CGI在冥想國度裡所散發的光與熱，綻放出跨越時空的容顏。

約莫UNIVAC誕生的同時，在美國人心目中擁有崇高地位的電影導演喬治．盧卡斯（George Lucas）於1944年間在加州出生。1977年盧卡斯還不到35歲，卻在以〈星球大戰〉獨領風騷後的2年內，創立了視覺特效公司Industrial Magic（ILM），成為電影特效行業的鼻祖。後來該公司的電腦技術部門更發展為吸引來自哈佛大學、麻省理工學院等跨科技與藝術人才競相投入的Pixar。

1982年，ILM在科幻電影〈星際之旅的復仇女神〉中，製作出電影史上第一個完全由電腦算圖生成的場景，逼真的CGI效果宣告電腦技術正式跨入了電影產業。1985年，盧卡斯在〈年輕的福爾摩斯〉裡，創造出史上第一個虛擬角色「彩色玻璃騎士」，雖然只在影片中出現30秒，卻耗費了當時的電腦長達半年的算圖製作時間。從這些歷史的軌跡裡，盧卡斯預見了超級電腦、高速算圖在電影藝術裡的魔力，也贏得了世紀之頂的仰望。

到了1990年代，大量應用電腦與CGI製作電影的態勢邁向了成熟期。在1993年的〈侏羅紀公園〉中，鬼才導演史蒂芬．史匹柏成功地讓迅猛龍、雷龍等古生物群靈活靈現地重生在人們的眼前。從恐龍斑黃的牙齒、粗糙的皮膚，到帶著淚水的眼睛等，這些仰賴電腦算出來的幻像，讓史匹柏扎實地賺進了豐厚的票房收益，電腦也因為史匹柏成為視覺特效製作上與電影劇情裡的要角。

有趣的是，這部影片的原著小說中，控管整座恐龍主題公園的是Cray Machine的CM-5超級電腦。

當觀眾還滯留在驚心動魄的恐龍旋風時，1997年的〈鐵達尼號〉倏忽間打響了個人電腦叢集（PC Cluster）用於電影製作的名號。卡麥隆大手筆地啟用了350 CPUs等計算機進行算圖，帶來了欣欣向榮的前景。在2001年出品的〈怪獸電力公司〉中，毛怪蘇利文身上總共有高達2,320,413根毛髮，1張包含牠與場景的影格（frame），以當時的超級電腦約要花費11～12小時運算；而單單1秒鐘的影片，至少要由24張連續性影格組成，可以想見所需電腦計算量的驚人程度。

同年，由DreamWorks發行上映的全3D動畫長片〈史瑞克〉，在拍了續集後，定義了史瑞克定律（Shrek's Law），預言影片所需的算圖小時（render hour）每3年至少會成長2倍。2009年的〈阿凡達〉更是把電影特效推向極致，總票房至今仍雄踞影史寶座，而它動用的電腦運算總能量相當於當年一座排名全球第12名的超級電腦，花了近兩年的時間。這些都是拜電影之賜所締造的超級電腦的世界級紀錄！

在傳統的認知上，超級電腦似乎只應用於處理物理、化學、力學、大氣等科學與工程的問題，而與大家的日常生活風馬牛不相關。惟近年來，透過上述影片中的虛擬角色、五光十色的特效畫面等，已讓一般大眾見識到超級電腦有如魔術師般的算圖神采。同時讓更多人了解電影製作不再只是依靠演員、實景與攝影機而已，還需有適當的超級電腦與CGI技術的相輔相乘，才能把完整的意境與情感順暢、細膩地傳遞給觀眾。

倚天屠龍合二為一

在超級電腦業跨足電影藝術界的氛圍中，國內從事高速計算（high-performance HPC）研發與應用的科學家，也遍訪了藝術設計學院、電影業界，並在雲端算圖的想像中，築起了以計算科技滋養文創的夢想。2011年11月，他們建造出國內第一座的算圖農場（Render Farm），開放給產學界使用。這是由國家實驗研究院國家高速網路與計算中心（國研院國網中心）的高速算圖專案團隊，於挺進全球500大超級電腦的Formosa 系列上，所自行研發建置的3D算圖主機，並提供Maya、算圖排程等軟體服務。

現有計算規模達720個核心數，相當約700臺個人電腦的算圖效能，同時配備有因應算圖衍生的海量數據所需的足夠儲存空間，以及傳輸所需的高速網路。目前用戶端不論是使用Linux、Windows或Mac OS等作業系統，都可以透過他們開發的圖形化介面，進行遠端派圖、算圖與運算進度監控。近期，更將擴充GPU來增進計算效能，這也是國內第一座使用GPU的算圖平臺。

除了前述的軟體服務外，他們也跟國內的兔將動畫公司合作，以該公司自行研發的動畫軟體，應用軟體權限外借方法，在Formosa系列上以480個核心數，成功地建立了平臺服務模式，讓他們的〈Hatching〉作品能在時效內完成，且贏得入選SIGGRAPH 2012國際動畫影展的榮耀。

目前算圖農場的用戶，除了大專院校外，還有業界級的長片，包含國際影獎得主周美玲導演執導的特效電影〈花漾〉、獲得2012數位出版金鼎獎的張永昌導演所創作之3D動畫電影〈太極星貓〉等。

在首開先河建立算圖農場的同時，團隊成員們也加緊腳步發展流體、粒子特效等的高速計算技術，為推進高速算圖的里程投注心力。2012年間，他們以雲門舞集的舞作風格為例，利用動作捕捉方法記錄舞者的動作，導入Maya後，採內嵌語法編寫控制程式，來執行nDynamics的特效模組功能。nDynamics是Maya內建的動力學系統，可用以模擬毛髮、布料、流體等動力行為。

國研院國網中心所創作的〈流煙．舞〉作品，利用了nDynamics在舞者肢體上設定煙霧粒子生成的初始速度、流體特效的風力場，並建立密度、透明度、溫度等的自動調控程序，以計算粒子的動力學作用後，呈現出舞者肢體與煙霧互動過程，以及細膩的尾煙與陰影效果。

他們也嘗試以Maya外掛軟體RealFlow最新的Hybrido平行計算模組，模擬海水擊岸時細緻的浪花、水沫，進而結合舞者的律動，傳達「A dynamics」的意境，並獲選於6、7千人與會規模之SIGGRAPH 2012發表。國際上優質的特效影作能夠成功地以假像「騙過」觀眾眼睛的關鍵，往往就在這些「細節」的處理上。

要達到精品級的視覺效果模擬，除了要熟悉動畫軟體與算圖農場的使用外，更重要的是還需具備對於力學現象的洞察力與學養。這也是目前國內電影、文創產業發展上的缺口，亟需有完善的機制，扎實地培養跨科學與藝術的人才，才能像倚天屠龍合二為一般地施展驚天動地的威力。

國研院國網中心承諾會在高速算圖的領域上，與文創界的伙伴們繼續努力、攜手扎根，希望在不久的將來，臺灣也能像金鐘獎導演邱立偉所說的︰「……好萊塢的工作室都是以1位藝術家、5位科學家的組成一起做動力特效的。」

希望山路

在臺灣電影的希望山路上，1999年〈臥虎藏龍〉裡輕功飄逸的武俠們，從螢幕裡飛進西方觀眾的心底，讓李安導演成為創下入圍奧斯卡最多獎項的外國電影、全球華語片收入最多的電影等紀錄。近期在臺灣取景拍攝的新作〈少年Pi的奇幻漂流〉，李安進一步大量運用電腦製作劇中的動物與視覺效果，挑戰立體電影技術的雄心，讓他再度奪下奧斯卡最佳導演獎座，令國人欣喜與驕傲！

還有，近年國內的電影界也在〈海角七號〉7億票房的加持後，興起了金光閃閃的創作熱潮；〈那一年我們一起追的女孩〉、〈翻滾吧！阿信〉、〈愛〉、〈陣頭〉、〈痞子英雄首部曲：全面開戰〉等，拉回了觀眾進電影院看國片的心。

今年的魏德聖導演繼〈賽德克．巴萊〉後，化身為製片的身分，力捧馬志翔導演，籌組以國內影視公司、視覺特效學研單位等為主體的製作團隊，要把嘉農少棒隊遠征甲子園球場，震驚全日本，贏得「天下嘉農」威名的故事〈KANO〉搬上大螢幕。觀眾會永遠記得，魏導在以〈賽〉片接下金馬獎最佳影片獎座時，曾說：「……這次沒做到的，下次一定補回來！」

最後，本文以魯迅的這段話，祝福築夢的每一份勇氣、每一顆誠心，祝福臺灣！

希望像一條山路，
其實，地上本沒路，
走的人多了，也便成了路。

誌謝

感謝國研院陳良基院長於2012年7月10日親臨第一屆「HPC功夫—國網3D動畫全國大賽」（HPC功夫）決賽典禮，就算圖農場在高速計算基礎設施中創造的價值，給予的肯定與勉勵。同時，要感謝清華大學動力機械系特聘講座陳文華教授，於擔任國研院院長期間，熱烈支持建造3D算圖主機的夢想。

另外，肯特動畫公司於算圖農場建置過程中的協助、雲門舞集舞蹈教室張記嘉的舞蹈創作與演出，以及來自產學研界的HPC功夫評審們等的相挺，在這裡一併致上最深的謝意。還有，要特別感謝國研院國網中心高速算圖團隊的熱情與創意，跟你們一起打拚，很光榮、很美好！

深度閱讀
與GPU 合體的PantaRay，展現了平行處理〈阿凡達〉海量場景的高速算圖力，http://dl.acm.org/citation.cfm?id=1778774
打造臺灣超級電腦 5挺進全球前五百大排名，http://www.nchc.org.tw/tw/e_paper/index.php?EPAPER_ID=115
HPC大俠　有功夫，http://www.nchc.org.tw/tw/e_paper/index.php?EPAPER_ID=116

